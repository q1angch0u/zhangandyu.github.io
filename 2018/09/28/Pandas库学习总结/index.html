<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Python,">





  <link rel="alternate" href="/atom.xml" title="怪兽宇的小站" type="application/atom+xml">






<meta name="description" content="python中的单引号，双引号，三引号的不同作用 Pandas简介Pandas是python数据分析中一个非常核心的数据库， 在日常的工作中经常需要使用Pandas库来对数据进行处理分析。Pandas的核心为两大数据结构， Series和DataFrame，Series用于存储一维数据， 而DataFrame存储多维数据。 常用的软件Anaconda是数据分析中运行python的一款利器， 安装教">
<meta name="keywords" content="Python">
<meta property="og:type" content="article">
<meta property="og:title" content="Pandas 库学习总结">
<meta property="og:url" content="https://zhangandyu.github.io/2018/09/28/Pandas库学习总结/index.html">
<meta property="og:site_name" content="怪兽宇的小站">
<meta property="og:description" content="python中的单引号，双引号，三引号的不同作用 Pandas简介Pandas是python数据分析中一个非常核心的数据库， 在日常的工作中经常需要使用Pandas库来对数据进行处理分析。Pandas的核心为两大数据结构， Series和DataFrame，Series用于存储一维数据， 而DataFrame存储多维数据。 常用的软件Anaconda是数据分析中运行python的一款利器， 安装教">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://i.loli.net/2018/09/28/5bae40d9057a1.png">
<meta property="og:image" content="https://i.loli.net/2018/09/28/5bae41224d1a0.png">
<meta property="og:updated_time" content="2019-02-19T16:33:46.924Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pandas 库学习总结">
<meta name="twitter:description" content="python中的单引号，双引号，三引号的不同作用 Pandas简介Pandas是python数据分析中一个非常核心的数据库， 在日常的工作中经常需要使用Pandas库来对数据进行处理分析。Pandas的核心为两大数据结构， Series和DataFrame，Series用于存储一维数据， 而DataFrame存储多维数据。 常用的软件Anaconda是数据分析中运行python的一款利器， 安装教">
<meta name="twitter:image" content="https://i.loli.net/2018/09/28/5bae40d9057a1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://zhangandyu.github.io/2018/09/28/Pandas库学习总结/">





  <title>Pandas 库学习总结 | 怪兽宇的小站</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">怪兽宇的小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Stay Hungry, Stay Foolish</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhangandyu.github.io/2018/09/28/Pandas库学习总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZY">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="怪兽宇的小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Pandas 库学习总结</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-28T00:00:00+08:00">
                2018-09-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程语言/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程语言/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="https://blog.csdn.net/woainishifu/article/details/76105667" target="_blank" rel="noopener">python中的单引号，双引号，三引号的不同作用</a></p>
<h1 id="Pandas简介"><a href="#Pandas简介" class="headerlink" title="Pandas简介"></a>Pandas简介</h1><p>Pandas是python数据分析中一个非常核心的数据库， 在日常的工作中经常需要使用Pandas库来对数据进行处理分析。Pandas的核心为两大数据结构， <strong>Series</strong>和<strong>DataFrame</strong>，Series用于存储一维数据， 而DataFrame存储多维数据。</p>
<h1 id="常用的软件"><a href="#常用的软件" class="headerlink" title="常用的软件"></a>常用的软件</h1><p>Anaconda是数据分析中运行python的一款利器， 安装教程可参考<br><a href="https://www.jianshu.com/p/169403f7e40c" target="_blank" rel="noopener">Anaconda入门使用指南</a></p>
<h1 id="Series对象"><a href="#Series对象" class="headerlink" title="Series对象"></a>Series对象</h1><p>Series用于存储一维数据，由两个相互关联的数组组成， 主数组用来存放数据。主数据每个元素都有一个与之关联的标签，这些标签存储在另一个叫Index的数组中。 </p>
<p><img src="https://i.loli.net/2018/09/28/5bae40d9057a1.png" alt="Series"></p>
<ol>
<li>创建Series对象</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zy = pd.Series([2, 3, 4, 6, 7, 4], index = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos;])</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>查看Series对象的两个数组</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查看元素</span><br><span class="line">zy.values</span><br><span class="line"></span><br><span class="line"># 查看索引</span><br><span class="line">zy.index</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>查看元素</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 将zy看做Numpy数组，指定键</span><br><span class="line">zy[2]</span><br><span class="line">zy[0:2]</span><br><span class="line"></span><br><span class="line"># 指定标签</span><br><span class="line">zy[&apos;c&apos;]</span><br><span class="line">zy[[&apos;b&apos;, &apos;c&apos;]]</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>筛选元素</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zy[zy &gt;3]</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>查看组成元素</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 查看包含的不同元素</span><br><span class="line">zy.unique()</span><br><span class="line">zy.value_counts()</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>通过字典来创建</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zy=Series(&#123;&apos;a&apos;:1,&apos;b&apos;:2,&apos;c&apos;:3&#125;)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="DataFrame对象"><a href="#DataFrame对象" class="headerlink" title="DataFrame对象"></a>DataFrame对象</h1><p><img src="https://i.loli.net/2018/09/28/5bae41224d1a0.png" alt="DataFrame"></p>
<h3 id="读取与写入Excel数据"><a href="#读取与写入Excel数据" class="headerlink" title="读取与写入Excel数据"></a>读取与写入Excel数据</h3><ol>
<li>读取文件夹的内容</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series, DataFrame</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">file_list = os.listdir(r&apos;E:\工作文件\周报\周数据\测试\0902-0908&apos;)</span><br><span class="line">print(file_list, &apos;\t&apos;)</span><br><span class="line"></span><br><span class="line"># 读取当前文件夹地址</span><br><span class="line">os.getwd()</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>读取xls格式Excel表</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.read_excel(&apos;E:/工作文件/周报/周数据/测试/0902-0908/an-商品汇总-uv.xls&apos;)</span><br><span class="line">df = pd.read_excel(r&apos;E:\工作文件\周报\周数据\测试\0902-0908\an-商品汇总-uv.xls&apos;)</span><br><span class="line"></span><br><span class="line">df = pd.read_excel(r&apos;E:\工作文件\周报\周数据\测试\0902-0908\an-商品汇总-uv.xlsx&apos;)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>读取csv格式Excel表</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = pd.read_csv(&apos;E:/工作文件/周报/周数据/测试/0902-0908/商品汇总.csv&apos;)</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>读取txt格式数据</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df = pd.read_table(r&apos;C:\Users\Administrator\Desktop\haha.txt&apos;)</span><br><span class="line"></span><br><span class="line">with open(r&apos;C:\Users\Administrator\Desktop\haha.txt&apos;, &apos;r&apos;) as f:</span><br><span class="line">    df = f.readlines() </span><br><span class="line"></span><br><span class="line">df = np.loadtxt(r&apos;C:\Users\Administrator\Desktop\haha.txt&apos;)  # 将txt文件存为numpy数组</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>将数据写入Excel表， 并输出</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data.to_excel(&apos;C:/Users/Administrator/Desktop/&apos;+&apos;商品分类.xlsx&apos;)</span><br><span class="line">data.to_excel(r&apos;C:\Users\Administrator\Desktop\\&apos;+&apos;商品分类.xlsx&apos;)</span><br><span class="line">data.to_excel(r&apos;C:\Users\Administrator\Desktop/&apos;+&apos;商品分类.xlsx&apos;)</span><br></pre></td></tr></table></figure>
<ol start="6">
<li><p>其他数据格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 从SQL表/库导入数据 </span><br><span class="line">pd.read_sql(query, connection_object)</span><br><span class="line"></span><br><span class="line"># 从JSON格式的字符串导入数据 </span><br><span class="line">pd.read_json(json_string)</span><br><span class="line"></span><br><span class="line"># 解析URL、字符串或者HTML文件，抽取其中的tables表格 </span><br><span class="line">pd.read_html(url)</span><br><span class="line"></span><br><span class="line"># 从你的粘贴板获取内容，并传给read_table() </span><br><span class="line">pd.read_clipboard()</span><br><span class="line"></span><br><span class="line"># 从字典对象导入数据，Key是列名，Value是数据</span><br><span class="line">pd.DataFrame(dict)</span><br><span class="line"></span><br><span class="line"># 导出数据到SQL表 </span><br><span class="line">df.to_sql(table_name, connection_object)</span><br><span class="line"></span><br><span class="line"># 以Json格式导出数据到文本文件</span><br><span class="line">df.to_json(filename)</span><br></pre></td></tr></table></figure>
</li>
<li><p>常见问题：</p>
</li>
</ol>
<ul>
<li>当文件有中文时， 可能会出现错误：Initializing from file failed 有中文， 可以用此方法解决</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = open(&apos;我的文件.csv&apos;)</span><br><span class="line">res = pd.read_csv(f)</span><br></pre></td></tr></table></figure>
<ul>
<li>修改数据格式，并存储</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">import os</span><br><span class="line">os.chdir(r&apos;E:\detil_data&apos;)</span><br><span class="line"># os.getcwd()</span><br><span class="line">datas = pd.read_csv(&apos;a.csv&apos;,encoding=&apos;gbk&apos;)</span><br><span class="line">datas.to_csv(&apos;test12.csv&apos;, index=False,encoding=&apos;utf_8_sig&apos; )</span><br></pre></td></tr></table></figure>
<ul>
<li>当文件特别大， 1个多G时， 可以用for循环查看数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for i in data:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>
<ul>
<li>查看大文件有多少列</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = open(&apos;E:/电信活跃用户数/2018-09-01至2018-09-11全国活跃用户明细.csv&apos;)</span><br><span class="line">data1 = pd.read_csv(data, iterator=True)</span><br><span class="line">data2 = data1.get_chunk(5)</span><br><span class="line">print(data2)</span><br></pre></td></tr></table></figure>
<p><a href="http://wiki.jikexueyuan.com/project/explore-python/Advanced-Features/iterator.html" target="_blank" rel="noopener">迭代器</a></p>
<h3 id="描述数据"><a href="#描述数据" class="headerlink" title="描述数据"></a>描述数据</h3><ol>
<li>表信息</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.info()</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>显示数据的行列数</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.shape</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>查看数据格式dtpyes</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.dtypes</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>显示列名、元素</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.columns</span><br><span class="line">df.values</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>添加默认列名</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 如果数据没有标题行，可用pandas添加默认的列名</span><br><span class="line">df = pd.read_excel(&apos;x.xlsx&apos;, header = None)</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>显示前数据前5行</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.head(5)</span><br><span class="line">df[[&apos;标题&apos;, &apos;客户端uv&apos;]].head()</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>显示数据后5行</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.tail(5)</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>值</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.values</span><br></pre></td></tr></table></figure>
<ol start="9">
<li>读取a列</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[&apos;a&apos;]</span><br></pre></td></tr></table></figure>
<ol start="10">
<li>修改索引</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = df.set_index[&apos;标题&apos;]</span><br></pre></td></tr></table></figure>
<ol start="11">
<li>显示数据唯一值（unique函数）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 数据有0， 是因对缺失值进行了填充</span><br><span class="line">df[&apos;经纪人级别&apos;].unique()</span><br></pre></td></tr></table></figure>
<ol start="12">
<li>对第几行数据不读取</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#不读取哪里数据，可用skiprows=[i]，跳过文件的第i行不读取</span><br><span class="line">df = pd.read_excel(&apos;x.xlsx&apos;,skiprows=[2] )</span><br></pre></td></tr></table></figure>
<ol start="13">
<li>对缺失值进行识别</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 所有缺失值显示为True</span><br><span class="line">pd.insull(df)  # df.isnull()</span><br></pre></td></tr></table></figure>
<ol start="14">
<li>计算</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#计算此data的数量</span><br><span class="line">df[&apos;data&apos;].value_counts()</span><br><span class="line"></span><br><span class="line"># 升序计数</span><br><span class="line">df[&apos;data&apos;].value_counts(ascending = True)</span><br><span class="line"></span><br><span class="line"># 升序计数并分组</span><br><span class="line">df[&apos;data&apos;].value_counts(ascending = True, bins = 2)</span><br><span class="line"></span><br><span class="line"># 计数</span><br><span class="line">df[&apos;data&apos;].count()</span><br></pre></td></tr></table></figure>
<h3 id="数据清洗"><a href="#数据清洗" class="headerlink" title="数据清洗"></a>数据清洗</h3><ol>
<li>删除空值 （dropna函数）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.dropna(how=&apos;any&apos;)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>填充空值（fillna函数）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 空值用0填充</span><br><span class="line">df.fillna(value=0)</span><br><span class="line"></span><br><span class="line"># 用均值对空值进行填充</span><br><span class="line">df[&apos;经纪人响应时长&apos;].fillna(df[&apos;经纪人响应时长&apos;].mean())</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>更改数据格式</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 将数据格式int64,改为float格式</span><br><span class="line">df[&apos;大区&apos;].astype(&apos;float64&apos;)</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>更改列名称, 修改列名。 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data2.columns = [[&apos;导航&apos;,&apos;uv&apos;, &apos;pv&apos;,&apos;户均点击&apos;]]</span><br><span class="line"></span><br><span class="line">df.rename(columns=&#123;&apos;IM渠道&apos;: &apos;渠道&apos;&#125;)</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>找到重复值</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.duplicated()</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>删除重复值</li>
</ol>
<p><a href="https://www.cnblogs.com/cocowool/p/8421997.html" target="_blank" rel="noopener">https://www.cnblogs.com/cocowool/p/8421997.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 默认第一次出现的保留，其余删除</span><br><span class="line">df[&apos;门店&apos;].drop_duplicates()</span><br><span class="line"></span><br><span class="line">最后一次出现的保留，其余删除</span><br><span class="line">df[&apos;门店&apos;].drop_duplicates(keep = &apos;last&apos;)</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>对列表内的值进行替换</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[&apos;客户UCID&apos;].replace(&apos;10531975&apos;, &apos;110&apos;)</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>找出异常值</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(data.describe())</span><br><span class="line"># 对异常值进行删除</span><br></pre></td></tr></table></figure>
<ol start="9">
<li>修改数据</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 修改结果</span><br><span class="line">df.replace(参数)</span><br><span class="line"></span><br><span class="line"># 修改索引</span><br><span class="line">df.rename(参数)</span><br><span class="line"></span><br><span class="line"># 增加, 将一列数据添加到另一列数据后。 </span><br><span class="line">df.append(参数)</span><br><span class="line"></span><br><span class="line"># 删除</span><br><span class="line">def df[&apos;a&apos;]</span><br><span class="line"></span><br><span class="line">df.drop([&apos;a&apos;, &apos;b&apos;], inplace = True)</span><br></pre></td></tr></table></figure>
<h3 id="对数据进行处理"><a href="#对数据进行处理" class="headerlink" title="对数据进行处理"></a>对数据进行处理</h3><ol>
<li>对两个数据进行合并- mearge, join, concat函数</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># 按照轴把多个对象拼接起来</span><br><span class="line">pd.concat(df1, df2)</span><br><span class="line"></span><br><span class="line"># join函数适合根据索引进行合并，合并索引相同但列不同的对象</span><br><span class="line"></span><br><span class="line"># merge函数，根据一个或多个键连接多行</span><br><span class="line"></span><br><span class="line">left = pd.DataFrame(&#123;&apos;key&apos;:[&apos;ko&apos;,&apos;k1&apos;,&apos;k2&apos;,&apos;k3&apos;],</span><br><span class="line">                     &apos;key2&apos; : [&apos;ko&apos;,&apos;k1&apos;,&apos;k2&apos;,&apos;k3&apos;],</span><br><span class="line">                     &apos;A&apos; :[&apos;ao&apos;,&apos;a1&apos;,&apos;a2&apos;,&apos;a3&apos; ],</span><br><span class="line">                     &apos;B&apos; : [&apos;bo&apos;,&apos;b1&apos;,&apos;b2&apos;,&apos;b3&apos; ]&#125;)</span><br><span class="line"></span><br><span class="line">right =pd.DataFrame(&#123;&apos;key&apos;:[&apos;ko&apos;,&apos;k1&apos;,&apos;k2&apos;,&apos;k3&apos;],</span><br><span class="line">                     &apos;key2&apos; : [&apos;ko&apos;,&apos;k1&apos;,&apos;k2&apos;,&apos;k4&apos;],</span><br><span class="line">                     &apos;c&apos; :[&apos;co&apos;,&apos;c1&apos;,&apos;c2&apos;,&apos;c3&apos; ],</span><br><span class="line">                     &apos;d&apos; : [&apos;do&apos;,&apos;d1&apos;,&apos;d2&apos;,&apos;d3&apos; ]&#125;)</span><br><span class="line"></span><br><span class="line"># 将left和right进行合并</span><br><span class="line">pd.merge(left, right)</span><br><span class="line"></span><br><span class="line"># 指定以key为键进行合并</span><br><span class="line">pd.merge(left, right, on = &apos;key&apos;)</span><br><span class="line"> pd.merge(name_3, name_1, left_on = [&apos;ming&apos;], right_on = [&apos;标记&apos;])</span><br><span class="line"></span><br><span class="line"># key2列不相同的部分会直接舍弃掉</span><br><span class="line">pd.merge(left, right, on = [&apos;key&apos;, &apos;key2&apos;])</span><br><span class="line"></span><br><span class="line"># 保留key2列不相同的部分</span><br><span class="line">pd.merge(left, right, on = [&apos;key&apos;, &apos;key2&apos;], how = &apos;outer&apos;)</span><br><span class="line"></span><br><span class="line"># 不相同的部分指定以左表为基准</span><br><span class="line">pd.merge(left, right, on = [&apos;key&apos;, &apos;key2&apos;], how = &apos;left&apos;)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>将 list 格式转化成 DataFrame 格式</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(data, columns = [&apos;省份&apos;, &apos;按钮名称&apos;, &apos;uv&apos;, &apos;pv&apos;] )</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>对数据进行排序</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data =pd.DataFrame(&#123; &apos;group&apos;:[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;a&apos;],</span><br><span class="line">                  &apos;data&apos; : [4, 2, 5, 6, 7, 8, 2, 9, 4]&#125;)</span><br><span class="line"></span><br><span class="line"># 在保证group列降序的情况下，对data列进行升序处理</span><br><span class="line">data.sort_values(by = [&apos;group&apos;, &apos;data&apos;],ascending = [False, True], inplace = True)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>对数据进行分组——excel中的数据透视表</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 如果price列的值&gt;3000，group列显示high，否则显示low</span><br><span class="line"></span><br><span class="line">df[&apos;group&apos;] = np.where(df[&apos;客户当天发送消息数&apos;] &gt; 5,&apos;high&apos;,&apos;low&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 对符合多个条件进行分组</span><br><span class="line"># 符合经纪人级别为A1且经纪人响应时长&gt;24的在sign列显示为1</span><br><span class="line"></span><br><span class="line">df.loc[(df[&apos;经纪人级别&apos;] == &apos;A1&apos;) &amp; (df[&apos;经纪人响应时长&apos;]&gt;= 24.0), &apos;sign&apos;]=1</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>对数据进行分列</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.DataFrame((x.split(&apos;网&apos;) for x in df[&apos;客户注册渠道&apos;]),</span><br><span class="line">                index=df.index,columns=[&apos;客户注册渠道&apos;,&apos;size&apos;])</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>新增一列</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = data.assign(ration = [4, 2, 5, 6, 7, 8, 2, 9, 4])</span><br><span class="line"></span><br><span class="line">data[&apos;rations&apos;] = [5, 2, 5, 6, 7, 8, 2, 9, 4]</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>对数据进行切分</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bins = [1,3,6,9]</span><br><span class="line">data_cut = pd.cut(data[&apos;data&apos;], bins)</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>取出的数据， 指定取到小数点几位数？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 取到小数点后3位</span><br><span class="line">for i in a :</span><br><span class="line">      print(&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="对数据进行提取-筛选"><a href="#对数据进行提取-筛选" class="headerlink" title="对数据进行提取,筛选"></a>对数据进行提取,筛选</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;&apos;A&apos;:[7,8,9,20, 10, 11, 14, 13, 14],</span><br><span class="line">                     &apos;B&apos; : [1,2,3,4,5, 6, 7, 7, 8]&#125;)</span><br></pre></td></tr></table></figure>
<ol>
<li>按条件进行提取</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># 选出B列的值大于3的数</span><br><span class="line">df[df[&apos;B&apos;]&gt;3]</span><br><span class="line"></span><br><span class="line"># 当 A列的值大于13时， 显示B，c列的值</span><br><span class="line">df[[&apos;B&apos;,&apos;C&apos;]][df[&apos;A&apos;]&gt;13]</span><br><span class="line"></span><br><span class="line"># 用isin函数进行判断</span><br><span class="line"></span><br><span class="line"># 使用isin函数根据特定值筛选记录。筛选A值等于10或者13的记录</span><br><span class="line">df[df.A.isin((10, 13))]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 判断经纪人级别是否为A3</span><br><span class="line">df[&apos;经纪人级别&apos;].isin([&apos;A3&apos;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> # 先判断结果，将结果为True的提取</span><br><span class="line">#先判断经纪人级别列里是否包含A3和M4，然后将复合条件的数据提取出来。</span><br><span class="line">df.loc[df[&apos;经纪人级别&apos;].isin([&apos;A3&apos;,&apos;M4&apos;])]</span><br><span class="line"></span><br><span class="line"># 使用&amp;（并）与| （或）操作符或者特定的函数实现多条件筛选 </span><br><span class="line"></span><br><span class="line"># A列值大于10， 并且B列值大于5</span><br><span class="line">df[(df[&apos;A&apos;] &gt; 10) &amp; (df[&apos;B&apos;] &gt;5)]</span><br><span class="line">df[np.logical_and(df[&apos;A&apos;] &gt; 10, df[&apos;B&apos;] &gt; 5)]</span><br><span class="line"></span><br><span class="line"># A列值大于10，或 B列值大于5</span><br><span class="line">df[(df[&apos;A&apos;] &gt; 10) | (df[&apos;C&apos;] &gt;20)]</span><br><span class="line">df[np.logical_or(df[&apos;A&apos;] &gt; 10, df[&apos;C&apos;] &gt; 20)]</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>按索引进行提取</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># 按标签索引</span><br><span class="line">df[1:4]</span><br><span class="line"></span><br><span class="line"># 传入列名</span><br><span class="line">df[[&apos;A&apos;, &apos;B&apos;]]</span><br><span class="line"></span><br><span class="line"># loc函数</span><br><span class="line"># 知道column names 和index(这里df的index没有指定，是默认生成的下标)，且两者都很好输入，可以选择 .loc同时进行行列选择</span><br><span class="line"></span><br><span class="line"># 根据标签取第一行， 显示为DataFrame格式</span><br><span class="line">df.loc[:0]</span><br><span class="line"></span><br><span class="line"># 取标签为2,3,4， A列的数据， 显示为Series格式</span><br><span class="line">df.loc[2:4, &apos;A&apos;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># iloc函数</span><br><span class="line"># 行和列都用index来进行提取</span><br><span class="line">df.iloc[0:5, 1:3] </span><br><span class="line"></span><br><span class="line"># 返回第一行 </span><br><span class="line">df.iloc[0,:]</span><br><span class="line"></span><br><span class="line"># 返回第一列的第一个元素</span><br><span class="line">df.iloc[0,0]</span><br><span class="line"></span><br><span class="line">#[0, 2, 5] 代表指定的行，[ 4, 5 ] 代表指定的列</span><br><span class="line">df.iloc[[0,2,5],[4,5]]</span><br><span class="line"></span><br><span class="line"># ix</span><br><span class="line">#ix的功能更加强大，参数既可以是索引，也可以是名称，相当于，loc和iloc的合体</span><br><span class="line"></span><br><span class="line">df.ix[1:3, [&apos;A&apos;, &apos;B&apos;]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># at函数</span><br><span class="line">根据指定行index及列label，快速定位DataFrame的元素，选择列时仅支持列名</span><br><span class="line">df.at[3, &apos;A&apos;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># iat函数</span><br><span class="line">选择时只使用索引参数</span><br><span class="line">df.iat[3, 2]</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>按日期进行提取</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">import pandas</span><br><span class="line">import datetime as dt</span><br><span class="line"></span><br><span class="line"># 重新设置索引</span><br><span class="line">df.reset_index()</span><br><span class="line"></span><br><span class="line">#设置日期为索引</span><br><span class="line">df=df.set_index(&apos;日期&apos;)</span><br><span class="line"></span><br><span class="line">#提取2016年11月2号的数据</span><br><span class="line">df[&apos;2016-11-02&apos; : &apos;2016-11-02&apos;]</span><br><span class="line"></span><br><span class="line">dt_time = dt.datetime(year = 2018, month=9, day = 17, hour = 22, minute = 43)</span><br><span class="line">print(dt_time)</span><br><span class="line"></span><br><span class="line">#构造时间</span><br><span class="line">ts = pd.Timestamp(&apos;2018-09-17 22:43:00&apos;)</span><br><span class="line">ts = pd.to_datetime(&apos;2018-09-17 22:43:00&apos;)</span><br><span class="line">ts = pd.to_datetime(&apos;17/09/2018 22:43:00&apos;)</span><br><span class="line"></span><br><span class="line"># 月份</span><br><span class="line">ts.month</span><br><span class="line"></span><br><span class="line">#日期</span><br><span class="line">ts.day</span><br><span class="line"></span><br><span class="line"># 加日期</span><br><span class="line">ts + pd.Timedelta(&apos; 10 days&apos;)</span><br><span class="line"></span><br><span class="line">ts.hour</span><br><span class="line"></span><br><span class="line"># 构造时间序列， 构造十个日期， 每12分钟一次</span><br><span class="line">pd.Series(pd.date_range(start = &apos;2018-09-17 22:43:00&apos;, periods = 10, freq = &apos;12min&apos;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">读取文件， 有时间列， 先将时间字符串转换成时间格式， 再进行处理</span><br><span class="line">或当读取数据时， 就对数据格式进行修改</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(&apos;.../db.csv&apos;, index_col = 0, parse_dates = True)</span><br><span class="line"></span><br><span class="line"># 读取时间为2013年的所有数据</span><br><span class="line">data[&apos;2013&apos;]</span><br><span class="line"></span><br><span class="line"># 取所有8点到12点之间的数据, 不包含8点和12点</span><br><span class="line">data[(data.index.hour &gt; 8) &amp; (data.index.hour &lt; 12)]</span><br><span class="line"></span><br><span class="line"># 包含8点到12点</span><br><span class="line">data.between_time(&apos;08:00&apos;, &apos;12:00&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 时间序列的重采样-看每月的平均值</span><br><span class="line">data.resample(&apos;M&apos;).mean()</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="数据汇总"><a href="#数据汇总" class="headerlink" title="数据汇总"></a>数据汇总</h3><ol>
<li>对数据进行分类 - group by函数</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 创建数组</span><br><span class="line">df = pd.DataFrame(&#123;&apos;key&apos; : [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;,&apos;a&apos;, &apos;b&apos;, &apos;c&apos;,&apos;a&apos;, &apos;b&apos;, &apos;c&apos;],</span><br><span class="line">                    &apos;data&apos; : [0, 2, 4, 5, 6, 7, 8, 9, 4]&#125;)</span><br><span class="line"></span><br><span class="line"># 分别计算a, b, c 的和</span><br><span class="line">df.groupby(&apos;key&apos;)[&apos;data&apos;].sum()</span><br><span class="line"></span><br><span class="line">df.groupby(&apos;key&apos;)[&apos;data&apos;].mean()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = pd.Series([1, 2, 3,1, 2, 3],[8,7,6,8,7,6])</span><br><span class="line"></span><br><span class="line"># 对索引进行排序</span><br><span class="line">grouped = s.groupby(level = 0， sort =False)</span><br><span class="line">grouped.first()</span><br><span class="line"></span><br><span class="line">df2 = pd.DataFrame(&#123;&apos;x&apos;:[&apos;a&apos;, &apos;b&apos;, &apos;a&apos;, &apos;b&apos;],</span><br><span class="line">                   &apos;y&apos; : [1, 2, 3, 4]&#125;)</span><br><span class="line"></span><br><span class="line"># 只关注x中的b</span><br><span class="line">df3 = df2.groupby([&apos;x&apos;]).get_group(&apos;b&apos;)</span><br><span class="line"></span><br><span class="line"># 查看个数</span><br><span class="line">df2.size()</span><br></pre></td></tr></table></figure>
<p>2, 对数据进行透视, 相当于Excel中的数据透视表功能。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pd.pivot_table(data, values=None, index=None, columns=None, aggfunc=&apos;mean&apos;)</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(&#123;&quot;A&quot;: [&quot;foo&quot;, &quot;foo&quot;, &quot;foo&quot;, &quot;foo&quot;, &quot;foo&quot;,</span><br><span class="line">                          &quot;bar&quot;, &quot;bar&quot;, &quot;bar&quot;, &quot;bar&quot;],</span><br><span class="line">                    &quot;B&quot;: [&quot;one&quot;, &quot;one&quot;, &quot;one&quot;, &quot;two&quot;, &quot;two&quot;,</span><br><span class="line">                          &quot;one&quot;, &quot;one&quot;, &quot;two&quot;, &quot;two&quot;],</span><br><span class="line">                    &quot;C&quot;: [&quot;small&quot;, &quot;large&quot;, &quot;large&quot;, &quot;small&quot;,</span><br><span class="line">                          &quot;small&quot;, &quot;large&quot;, &quot;small&quot;, &quot;small&quot;,</span><br><span class="line">                          &quot;large&quot;],</span><br><span class="line">                    &quot;D&quot;: [1, 2, 2, 3, 3, 4, 5, 6, 7]&#125;)</span><br><span class="line"></span><br><span class="line">table = pd.pivot_table(df, values=&apos;D&apos;, index=[&apos;A&apos;, &apos;B&apos;],</span><br><span class="line">                     columns=[&apos;C&apos;], aggfunc=np.sum)</span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li>对数据进行映射</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 用map函数对字典进行映射， 新加一列</span><br><span class="line">data[&apos;upper&apos;] = data[&apos;group&apos;].map(dataUpper)</span><br></pre></td></tr></table></figure>
<h3 id="数据统计"><a href="#数据统计" class="headerlink" title="数据统计"></a>数据统计</h3><ol>
<li>数据采样</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 简单随机抽取sample</span><br><span class="line">df.sample(n=3)</span><br><span class="line"></span><br><span class="line"># 设置采样权重</span><br><span class="line"># 需要对每一行进行权重设置，列表行数少可行，过多不可行</span><br><span class="line"></span><br><span class="line"># 假设有4行数据，设置采样权重</span><br><span class="line">weights = [0, 0, 0.5, 0.5]</span><br><span class="line">df.sample(n=4, weights=weights)</span><br><span class="line"></span><br><span class="line">## 确定采样后是否放回</span><br><span class="line"># 采样后放回，True</span><br><span class="line">df.sample(n=6, replace=True)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>统计计算</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 描述统计 describe函数</span><br><span class="line"></span><br><span class="line">#自动生成数据的数量，均值，标准差等数据</span><br><span class="line">#round（2）,显示小数点后面2位数，T转置</span><br><span class="line"></span><br><span class="line">df.describe().round(2).T</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 标准差std()</span><br><span class="line">df[&apos;经纪人响应时长&apos;].std()</span><br><span class="line"></span><br><span class="line"># 协方差cov</span><br><span class="line">df[&apos;经纪人当天发送消息数&apos;].cov(df[&apos;客户当天发送消息数&apos;]</span><br><span class="line"></span><br><span class="line"># 相关性分析corr</span><br><span class="line">df[&apos;客户当天发送消息数&apos;].corr(df[&apos;经纪人当天发送消息数&apos;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 中位数</span><br><span class="line">df.median()</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="对字符串进行操作"><a href="#对字符串进行操作" class="headerlink" title="对字符串进行操作"></a>对字符串进行操作</h3><ol>
<li>大小写</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.lower()</span><br><span class="line">a.upper()</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>长度</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 长度</span><br><span class="line">a.len()</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>去除空格</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a.strip()</span><br><span class="line">a.lstrip()</span><br><span class="line">alrstrip()</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>替换</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.columns.str.replace(&apos; &apos;, &apos;_&apos;)</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>切分与分列、 合并</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#切分</span><br><span class="line">a.split(&apos;_&apos;)</span><br><span class="line"></span><br><span class="line"># 切分， 且成为新列</span><br><span class="line">a.split(&apos;_&apos;, expand = True)</span><br><span class="line"></span><br><span class="line"># 对切分进行限制, 只切1次</span><br><span class="line">a.split(&apos;_&apos;, expand = True, n=1)</span><br><span class="line"></span><br><span class="line"># 查看是否包含</span><br><span class="line">a.str.contains(&apos;A&apos;)</span><br><span class="line"></span><br><span class="line"># 分列</span><br><span class="line">s.str.get_dummies(sep= &apos;|&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">对两列数据进行合并</span><br><span class="line">df[&apos;省份_名称&apos;] = df[&apos;省份&apos;].str.cat(df[&apos;名称&apos;],sep = &apos;_&apos;)</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="http://plosti2dy.bkt.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190220005812.jpg" alt="ZY 微信支付">
        <p>微信支付</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Python/" rel="tag"># Python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/27/数据分析方法/" rel="next" title="数据分析常见的术语">
                <i class="fa fa-chevron-left"></i> 数据分析常见的术语
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/10/10/阅读系统/" rel="prev" title="阅读系统">
                阅读系统 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ZY</p>
              <p class="site-description motion-element" itemprop="description">个人博客</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">35</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zhangandyu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="zhangyu756897669@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/p/1005052177096132?sudaref=zhangandyu.github.io&display=0&retcode=6102&sudaref=passport.weibo.com" target="_blank" title="weibo">
                      
                        <i class="fa fa-fw fa-globe"></i>weibo</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-globe"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ruanyifeng.com/blog/" title="阮一峰的网络日志" target="_blank">阮一峰的网络日志</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Pandas简介"><span class="nav-number">1.</span> <span class="nav-text">Pandas简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常用的软件"><span class="nav-number">2.</span> <span class="nav-text">常用的软件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Series对象"><span class="nav-number">3.</span> <span class="nav-text">Series对象</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DataFrame对象"><span class="nav-number">4.</span> <span class="nav-text">DataFrame对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#读取与写入Excel数据"><span class="nav-number">4.0.1.</span> <span class="nav-text">读取与写入Excel数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#描述数据"><span class="nav-number">4.0.2.</span> <span class="nav-text">描述数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据清洗"><span class="nav-number">4.0.3.</span> <span class="nav-text">数据清洗</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对数据进行处理"><span class="nav-number">4.0.4.</span> <span class="nav-text">对数据进行处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对数据进行提取-筛选"><span class="nav-number">4.0.5.</span> <span class="nav-text">对数据进行提取,筛选</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据汇总"><span class="nav-number">4.0.6.</span> <span class="nav-text">数据汇总</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据统计"><span class="nav-number">4.0.7.</span> <span class="nav-text">数据统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对字符串进行操作"><span class="nav-number">4.0.8.</span> <span class="nav-text">对字符串进行操作</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZY</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  







  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
